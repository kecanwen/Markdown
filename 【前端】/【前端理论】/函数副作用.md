### 函数副作用

是指函数在正常工作任务之外对外部环境所施加的影响。

具体地说，函数副作用是指函数被调用，完成了函数既定的计算任务，

但同时因为访问了外部数据，尤其是因为对外部数据进行了写操作，从而一定程度地改变了系统环境



##### 在函数式编程的教材中，如下的行为是称之为`副作用`的：

- *修改一个变量*
- *修改一个对象的字段值*
- *抛出异常*
- *在控制台显示信息、从控制台接收输入*
- *在屏幕上显示（GUI）*
- *读写文件、网络、数据库。*
- 更改文件系统
- 往数据库插入记录
- 发送一个 http 请求
- 可变数据
- 打印/log
- 获取用户输入
- DOM 查询
- 访问系统状态

#### 纯函数的好处

- ###### 因为纯函数每次都能够得到相同的结果，所以可以把结果缓存起来

  ```js
  const require('lodash')
  function getArea(r){
    console.log(r)
    return Math.PI*r*r
  }
  
  let getAreaWithMemory=__.memoize(getArea)
  console.log(getAreaWithMemory(4))
  console.log(getAreaWithMemory(4))
  console.log(getAreaWithMemory(4))
  // 输出：
  // 4
  // 50.26548245743669
  // 50.26548245743669
  // 50.26548245743669
  
  // 模拟 memoize 方法
  function memoize(f){
    let cache = {}
    return function(){
      let key = JSON.stringify(arguments)
      cache[key] = cache[key] || f.apply(f,arguments)
      return cache[key]
    }
  }
  ```

  

- 纯函数让测试变得更方便，因为其没有副作用，不用考虑结果之外的影响

- 纯函数不需要访问共享的内存数据，所有在并行环境中可以任意运行纯函数

​		

> *完整的回答这个问题可能需要写一本书（不用太长），这里的关键是：函数式编程是一种隔离应用逻辑（表达）与实际运行时解释的方法。*
> *你的“函数式代码”用来表达（但不执行）所需要达成的执行效果，返回某种形式的数据结构来描述这个计算结果。然后，我们会在一个解释器中来执行该结果，后者不是函数式的。*
>
> 
>
> *完全的纯函数式编程是不可能的，一段纯函数式代码，出了会让CPU产生热量，不会产生其他副作用，我们还需要一个解释器来真实的进行IO操作，如读写文件、网络等。将两者隔离会带来很多的优势：纯函数式代码，更易于测试，引用透明性会让代码可读性提升，提高开发阶段的效率，减少BUG，提高产品质量。同时，函数式编程，相比命令式编程，可以让很多复杂的代码便得更简单。
> *因此，在函数式语言中，处理副作用的方式就是隔离副作用，使用纯函数式的代码，来计算”副作用“，并将其表示为一个”值“，然后将该值交给一个解释器来执行，这个可以参考*



> *通过隔离，尽量让纯函数式部分占比最大化，而让有副作用的部分限制在较小的比例中。（尽管如此，在很多应用中，这一块还是占有相当大的比例。）*



函数式编程就是一种抽象程度很高的编程范式，纯粹的函数式编程语言编写的函数没有变量，因此，任意一个函数，只要输入是确定的，输出就是确定的，这种纯函数我们称之为没有副作用。而允许使用变量的程序设计语言，由于函数内部的变量状态不确定，同样的输入，可能得到不同的输出，因此，这种函数是有副作用的。

**函数式编程的一个特点就是，允许把函数本身作为参数传入另一个函数，还允许返回一个函数！**























